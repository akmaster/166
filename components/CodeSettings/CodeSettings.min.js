!(function () {
  'use strict';
  const e = {
    fast: { countdown: 3, duration: 15, interval: 60 },
    normal: { countdown: 5, duration: 30, interval: 300 },
    relaxed: { countdown: 10, duration: 60, interval: 600 },
  };
  document.querySelectorAll('.btn-preset').forEach((t) => {
    t.addEventListener('click', function () {
      const t = this.dataset.preset;
      e[t] &&
        ((document.getElementById('countdown_duration').value = e[t].countdown),
        (document.getElementById('code_duration').value = e[t].duration),
        (document.getElementById('code_interval').value = e[t].interval));
    });
  }),
    document.getElementById('save-code-settings')?.addEventListener('click', function () {
      const e = document.getElementById('countdown_duration').value,
        t = document.getElementById('code_duration').value,
        n = document.getElementById('code_interval').value,
        d = '' === e ? 5 : parseInt(e),
        a = '' === t ? 30 : parseInt(t),
        o = '' === n ? 600 : parseInt(n);
      if (a < d + 10) return void alert('Duration en az countdown + 10 saniye olmalÄ±');
      if (o < a + 30) return void alert('Interval en az duration + 30 saniye olmalÄ±');
      const i = new FormData();
      i.append('countdown_duration', e),
        i.append('code_duration', t),
        i.append('code_interval', n),
        (this.disabled = !0),
        (this.textContent = 'ðŸ’¾ Kaydediliyor...'),
        fetch('/api/update-code-settings.php', { method: 'POST', body: i })
          .then((e) => e.json())
          .then((e) => {
            e.success
              ? (alert(e.message), location.reload())
              : (alert('Hata: ' + e.message),
                (this.disabled = !1),
                (this.textContent = 'ðŸ’¾ AyarlarÄ± Kaydet'));
          })
          .catch((e) => {
            alert('BaÄŸlantÄ± hatasÄ±'),
              (this.disabled = !1),
              (this.textContent = 'ðŸ’¾ AyarlarÄ± Kaydet');
          });
    });
})();
